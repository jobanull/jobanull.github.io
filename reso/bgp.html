<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Border Gateway Protocol (BGP)</title>
  <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>
<body class="note-container">

  <main class="note-main">
    <h2 class="note-title text-center">Border Gateway Protocol (BGP)</h2>
    <p class="note-paragraph">
      Border Gateway Protocol (BGP) adalah protokol routing yang digunakan untuk bertukar informasi rute antar 
      <em>Autonomous System</em> (AS) di internet. BGP termasuk kategori <strong>path vector protocol</strong> 
      yang mengandalkan <em>policy-based routing</em> untuk memilih jalur terbaik, bukan sekadar metrik teknis.
      BGP berjalan di atas TCP port 179 sehingga komunikasi antar router bersifat andal dan terkontrol.
    </p>

    <h3 class="note-subtitle">Peran dan Fungsi BGP</h3>
    <ul class="note-list">
      <li>Memilih jalur terbaik untuk mencapai jaringan tujuan berdasarkan kebijakan.</li>
      <li>Menghubungkan jaringan antar-AS di internet.</li>
      <li>Memberikan kontrol penuh terhadap rute yang diumumkan atau diterima.</li>
      <li>Menangani skala besar (puluhan ribu hingga jutaan rute).</li>
    </ul>

    <h3 class="note-subtitle">Jenis BGP</h3>
    <ul class="note-list">
      <li><strong>EBGP (External BGP)</strong> – Digunakan untuk pertukaran rute antar-AS yang berbeda.</li>
      <li><strong>IBGP (Internal BGP)</strong> – Digunakan untuk pertukaran rute antar-router dalam AS yang sama.</li>
    </ul>

    <h3 class="note-subtitle">Atribut Penting BGP</h3>
    <p class="note-paragraph">
      BGP menggunakan sejumlah atribut untuk menentukan jalur terbaik. Beberapa yang paling umum:
    </p>
    <ul class="note-list">
      <li><strong>Weight</strong> – Atribut lokal pada router Cisco, nilai lebih besar lebih diutamakan.</li>
      <li><strong>Local Preference (LOCAL_PREF)</strong> – Menentukan preferensi jalur keluar dalam satu AS; nilai lebih tinggi lebih diutamakan.</li>
      <li><strong>AS Path</strong> – Menyimpan urutan AS yang dilewati; jalur terpendek biasanya diutamakan.</li>
      <li><strong>Multi-Exit Discriminator (MED)</strong> – Memberi sinyal jalur keluar yang diinginkan kepada AS tetangga.</li>
      <li><strong>Next Hop</strong> – Menentukan alamat router berikut yang harus dilalui paket untuk mencapai tujuan.</li>
    </ul>

    <h3 class="note-subtitle">Kelebihan BGP</h3>
    <ul class="note-list">
      <li>Kontrol routing yang sangat fleksibel.</li>
      <li>Mendukung multi-homing dan redundansi koneksi.</li>
      <li>Skalabilitas tinggi untuk jaringan berskala global.</li>
      <li>Dapat mengimplementasikan kebijakan keamanan dan filtering rute.</li>
    </ul>

    <h3 class="note-subtitle">Kekurangan BGP</h3>
    <ul class="note-list">
      <li>Konfigurasi dan pemeliharaan relatif kompleks.</li>
      <li>Konsvergensi (waktu stabil) lebih lambat dibanding protokol routing internal seperti OSPF atau EIGRP.</li>
      <li>Sangat bergantung pada kebijakan dan pengaturan manual oleh administrator.</li>
    </ul>

     <h3 class="note-subtitle">CONTOH KASUS</h3>
      <ul class="note-list">
        <li>Tujuan: Mengonfigurasi <strong>BGP dan filter</strong> agar <strong>PC 1 hanya bisa melakukan ping ke PC2</strong>.</li>
        <li>Filter BGP: RB4 menerima route hanya ke PC2 dan mengiklankan route hanya ke PC1.</li>
        <li>Catatan:  
          <ul>
            <li>RB1: ASN 64112, mengiklankan jaringan link ke RB2 & RB3.</li>
            <li>RB2 & RB3: Router transit, mengatur route ke RB4 & RB5.</li>
            <li>RB4: ASN 64111, filter masuk hanya menerima prefix PC2, filter keluar hanya mengiklankan PC1.</li>
            <li>RB5: ASN 64113, mengiklankan jaringan PC2 & PC3.</li>
          </ul>
        </li>
      </ul>


       <img src="img/bgp1.png" alt="Diagram jaringan" class="note-image" />
       <p class="note-subtitle">RB1</p>
    <pre class="note-codeblock"><code>
/routing bgp instance
set default as=64112                    # Set Autonomous System Number (ASN) RB1 = 64112

/ip address
add address=10.1.1.1/30 interface=ether2 network=10.1.1.0   # IP link ke RB2
add address=11.1.1.1/30 interface=ether3 network=11.1.1.0   # IP link ke RB3

/ip dhcp-client
add disabled=no interface=ether1                           # Dapatkan IP dari ISP/internet di ether1

/ip firewall nat
add action=masquerade chain=srcnat out-interface=ether1    # NAT keluar ke internet

/ip route
add distance=1 dst-address=12.1.1.0/30 gateway=10.1.1.2     # Route menuju RB4 via RB2
add distance=1 dst-address=13.1.1.0/30 gateway=11.1.1.2     # Route menuju RB5 via RB3

/routing bgp network
add network=10.1.1.0/30 synchronize=no   # Iklankan network 10.1.1.0/30 ke BGP
add network=11.1.1.0/30 synchronize=no   # Iklankan network 11.1.1.0/30 ke BGP

/routing bgp peer
add multihop=yes name=peer1 remote-address=12.1.1.2 remote-as=64111   # BGP ke RB4
add multihop=yes name=peer2 remote-address=13.1.1.2 remote-as=64113   # BGP ke RB5

/system identity
set name=RB1                             # Set nama router

    </code></pre>
    
       <p class="note-subtitle">RB2</p>
    <pre class="note-codeblock"><code>
/ip address
add address=10.1.1.2/30 interface=ether1 network=10.1.1.0    # Link ke RB1
add address=12.1.1.1/30 interface=ether2 network=12.1.1.0    # Link ke RB4

/ip route
add distance=1 gateway=10.1.1.1                             # Default route via RB1
add distance=1 dst-address=192.168.1.0/30 gateway=12.1.1.2   # Route ke PC1 di RB4

/system identity
set name=RB2

    </code></pre>

       <p class="note-subtitle">RB3</p>
    <pre class="note-codeblock"><code>
/ip address
add address=11.1.1.2/30 interface=ether1 network=11.1.1.0    # Link ke RB1
add address=13.1.1.1/30 interface=ether2 network=13.1.1.0    # Link ke RB5

/ip route
add distance=1 gateway=11.1.1.1                             # Default route via RB1
add distance=1 dst-address=192.168.2.0/30 gateway=13.1.1.2   # Route ke PC2 di RB5
add distance=1 dst-address=192.168.3.0/30 gateway=13.1.1.2   # Route ke jaringan lain di RB5

/system identity
set name=RB3

    </code></pre>

       <p class="note-subtitle">RB4</p>
    <pre class="note-codeblock"><code>
/routing bgp instance
set default as=64111                      # ASN RB4

/ip address
add address=12.1.1.2/30 interface=ether1 network=12.1.1.0   # Link ke RB2
add address=192.168.1.1/30 interface=ether2 network=192.168.1.0   # Jaringan PC1

/ip dns
set servers=8.8.8.8,8.8.4.4                                # DNS Google

/ip route
add distance=1 dst-address=10.1.1.0/30 gateway=12.1.1.1     # Route ke RB1

/routing bgp network
add network=192.168.1.0/30 synchronize=no                  # Iklankan jaringan PC1

/routing bgp peer
add in-filter=test-in multihop=yes name=peer1 out-filter=test-out \
    remote-address=10.1.1.1 remote-as=64112                 # BGP peer ke RB1 dengan filter masuk & keluar

/routing filter
add action=accept chain=test-in prefix=192.168.2.0/30       # Terima route hanya ke PC2
add action=accept chain=test-out prefix=192.168.1.0/30      # Hanya iklankan jaringan PC1
add action=discard chain=test-out prefix=0.0.0.0/0 prefix-length=0-128  # Tolak semua iklan lain
add action=discard chain=test-in                           # Tolak semua prefix selain PC2

/system identity
set name=RB4

    </code></pre>

       <p class="note-subtitle">RB5</p>
    <pre class="note-codeblock"><code>
/routing bgp instance
set default as=64113                      # ASN RB5

/ip address
add address=13.1.1.2/30 interface=ether1 network=13.1.1.0   # Link ke RB3
add address=192.168.2.1/30 interface=ether2 network=192.168.2.0   # Jaringan PC2
add address=192.168.3.1/30 interface=ether3 network=192.168.3.0   # Jaringan PC3

/ip route
add distance=1 gateway=13.1.1.1                            # Default route via RB3

/routing bgp network
add network=192.168.2.0/30 synchronize=no                  # Iklankan jaringan PC2
add network=192.168.3.0/30 synchronize=no                  # Iklankan jaringan PC3

/routing bgp peer
add multihop=yes name=peer1 remote-address=11.1.1.1 remote-as=64112  # BGP ke RB1

/system identity
set name=RB5

    </code></pre>

    <h3 class="note-subtitle">Tips Praktis</h3>
    <ul class="note-list">
      <li>Gunakan <strong>prefix-list</strong> dan <strong>route-map</strong> untuk mengontrol rute yang diumumkan/didapat.</li>
      <li>Monitor sesi BGP secara berkala untuk memastikan stabilitas.</li>
      <li>Hindari menerima seluruh tabel BGP kecuali benar-benar dibutuhkan.</li>
      <li>Gunakan <em>route reflector</em> pada IBGP untuk mengurangi kebutuhan full-mesh.</li>
    </ul>

    <hr class="note-divider" />

  </main>

  <script>
    document.querySelectorAll('.note-image').forEach(img => {
      img.addEventListener('click', () => {
        img.classList.toggle('expanded');
      });
    });
  </script>
</body>
</html>
