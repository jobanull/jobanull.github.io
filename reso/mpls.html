<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Multiprotocol Label Switching (MPLS)</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body class="note-container">

  <main class="note-main">
    <h2 class="note-title">Multiprotocol Label Switching (MPLS)</h2>
    <p class="note-paragraph">
      MPLS adalah teknologi forwarding paket yang menggunakan <strong>label</strong> sebagai pengenal aliran lalu lintas, 
      bukan hanya berdasarkan alamat IP. MPLS bekerja di antara Layer 2 dan Layer 3, sehingga sering disebut 
      <em>Layer 2.5</em>. Teknologi ini digunakan untuk mempercepat proses forwarding, mendukung QoS, dan 
      mengimplementasikan VPN skala besar.
    </p>

    <h3 class="note-subtitle">Konsep Dasar</h3>
    <ul class="note-list">
      <li><strong>Label:</strong> ID 20-bit yang ditambahkan pada header MPLS untuk mengidentifikasi aliran paket.</li>
      <li><strong>Label Stack:</strong> MPLS dapat membawa beberapa label secara berurutan (label stacking).</li>
      <li><strong>LSP (Label Switched Path):</strong> jalur forwarding yang telah ditentukan untuk paket berlabel.</li>
      <li><strong>FEC (Forwarding Equivalence Class):</strong> sekumpulan paket yang diperlakukan sama oleh MPLS.</li>
    </ul>

    <h3 class="note-subtitle">Komponen Utama</h3>
    <ul class="note-list">
      <li><strong>LER (Label Edge Router):</strong> Router di tepi MPLS domain yang menambahkan atau menghapus label.</li>
      <li><strong>LSR (Label Switch Router):</strong> Router di dalam MPLS domain yang hanya mengganti label sesuai tabel forwarding.</li>
      <li><strong>LDP (Label Distribution Protocol):</strong> Protokol yang mendistribusikan label antar router MPLS.</li>
      <li><strong>RSVP-TE:</strong> Protokol signaling untuk MPLS Traffic Engineering.</li>
    </ul>

    <h3 class="note-subtitle">Header MPLS</h3>
    <ul class="note-list">
      <li><strong>Label:</strong> 20 bit.</li>
      <li><strong>EXP:</strong> 3 bit (QoS/CoS).</li>
      <li><strong>S:</strong> 1 bit (Bottom of Stack indicator).</li>
      <li><strong>TTL:</strong> 8 bit (Time To Live).</li>
    </ul>

    <h3 class="note-subtitle">Jenis Layanan MPLS</h3>
    <ul class="note-list">
      <li><strong>MPLS L3VPN:</strong> VPN berbasis IP yang memisahkan routing antar pelanggan.</li>
      <li><strong>MPLS L2VPN:</strong> Menghubungkan site secara Layer 2 (contoh: VPLS, VPWS).</li>
      <li><strong>MPLS TE (Traffic Engineering):</strong> Mengatur jalur lalu lintas untuk optimasi kapasitas.</li>
      <li><strong>MPLS QoS:</strong> Memberikan prioritas layanan berdasarkan label EXP.</li>
    </ul>

    <h3 class="note-subtitle">Proses Forwarding MPLS</h3>
    <ol class="note-list">
      <li>Paket masuk ke LER ingress → dicocokkan dengan FEC → diberi label.</li>
      <li>LSR di tengah jaringan mengganti label sesuai tabel LFIB (Label Forwarding Information Base).</li>
      <li>Paket sampai di LER egress → label dihapus → paket diteruskan ke tujuan akhir.</li>
    </ol>

    <h3 class="note-subtitle">Keuntungan MPLS</h3>
    <ul class="note-list">
      <li>Forwarding lebih cepat dibanding routing murni.</li>
      <li>Mendukung multi-protocol (IPv4, IPv6, Ethernet, Frame Relay, ATM).</li>
      <li>Mendukung QoS untuk aplikasi real-time (VoIP, video).</li>
      <li>Mudah mengimplementasikan VPN skala besar.</li>
    </ul>

    <h3 class="note-subtitle">CONTOH KASUS</h3>
    <ul class="note-list">
        <li>Topologi menggunakan MPLS dengan protokol OSPF untuk distribusi routing antar router (RB1-RB7).</li>
        <li>RB1:
            <ul>
                <li>IP: <code>10.1.1.1/30</code> (ether1), <code>11.1.1.1/30</code> (ether2)</li>
                <li>ether1 & ether2 diikutkan OSPF area backbone, ether5 sebagai DHCP client.</li>
            </ul>
        </li>
        <li>RB2 hingga RB7: Setiap router memiliki interface dan network OSPF sesuai area masing-masing (backbone, area2, area3).</li>
        <li>Tujuan: Membuat jalur MPLS antar router dan memastikan routing OSPF berjalan di semua interface.</li>
    </ul>



    <img src="img/mpls.png" alt="Diagram jaringan" class="note-image" />

    <p class="note-subtitle">RB1</p>
    <pre class="note-codeblock"><code>
/ip address
add address=10.1.1.1/30 interface=ether1 network=10.1.1.0   # IP ke neighbor OSPF
add address=11.1.1.1/30 interface=ether2 network=11.1.1.0   # IP ke neighbor OSPF

/ip dhcp-client
add disabled=no interface=ether5  # ether5 untuk mendapatkan IP dari upstream

/routing ospf interface
add interface=ether1
add interface=ether2   # Menambahkan interface ke OSPF area backbone

/routing ospf network
add area=backbone network=10.1.1.0/30
add area=backbone network=11.1.1.0/30  # Menetapkan network OSPF di area backbone

/system identity
set name=R1  # Nama router

    </code></pre>

    <p class="note-subtitle">RB2</p>
    <pre class="note-codeblock"><code>
/routing ospf area
add area-id=2.2.2.2 name=area2  # Membuat area2 OSPF

/ip address
add address=10.1.1.2/30 interface=ether1 network=10.1.1.0
add address=12.1.1.1/30 interface=ether2 network=12.1.1.0
add address=16.1.1.1/30 interface=ether3 network=16.1.1.0
add address=17.1.1.1/30 interface=ether4 network=17.1.1.0  # IP tiap interface

/routing ospf interface
add interface=ether1
add interface=ether2
add interface=ether3
add interface=ether4  # Semua interface ikut OSPF

/routing ospf network
add area=backbone network=10.1.1.0/30
add area=backbone network=12.1.1.0/30
add area=area2 network=16.1.1.0/30
add area=area2 network=17.1.1.0/30  # Network mapping ke area OSPF

/system identity
set name=R2

    </code></pre>

    <p class="note-subtitle">RB3</p>
    <pre class="note-codeblock"><code>
/routing ospf area
add area-id=3.3.3.3 name=area3  # Membuat area3 OSPF

/ip address
add address=11.1.1.2/30 interface=ether1 network=11.1.1.0
add address=12.1.1.2/30 interface=ether2 network=12.1.1.0
add address=13.1.1.1/30 interface=ether3 network=13.1.1.0
add address=14.1.1.1/30 interface=ether4 network=14.1.1.0

/routing ospf interface
add interface=ether1
add interface=ether2
add interface=ether3
add interface=ether4

/routing ospf network
add area=backbone network=12.1.1.0/30
add area=backbone network=11.1.1.0/30
add area=area3 network=13.1.1.0/30
add area=area3 network=14.1.1.0/30

/system identity
set name=R3

    </code></pre>

    <p class="note-subtitle">RB4</p>
    <pre class="note-codeblock"><code>
/routing ospf area
add area-id=3.3.3.3 name=area3

/ip address
add address=13.1.1.2/30 interface=ether1 network=13.1.1.0
add address=15.1.1.1/30 interface=ether2 network=15.1.1.0

/routing ospf interface
add interface=ether1
add interface=ether2

/routing ospf network
add area=area3 network=13.1.1.0/30
add area=area3 network=15.1.1.0/30

/system identity
set name=R4

    </code></pre>

    <p class="note-subtitle">RB5</p>
    <pre class="note-codeblock"><code>
/routing ospf area
add area-id=3.3.3.3 name=area3

/ip address
add address=14.1.1.2/30 interface=ether1 network=14.1.1.0
add address=15.1.1.2/30 interface=ether2 network=15.1.1.0
add address=192.168.2.1/30 interface=ether3 network=192.168.2.0

/routing ospf interface
add interface=ether1
add interface=ether2

/routing ospf network
add area=area3 network=15.1.1.0/30
add area=area3 network=14.1.1.0/30
add area=area3 network=192.168.2.0/30

/system identity
set name=R5

    </code></pre>

    <p class="note-subtitle">RB6</p>
    <pre class="note-codeblock"><code>
/routing ospf area
add area-id=2.2.2.2 name=area2

/ip address
add address=16.1.1.2/30 interface=ether1 network=16.1.1.0
add address=18.1.1.1/30 interface=ether2 network=18.1.1.0

/routing ospf interface
add interface=ether1
add interface=ether2

/routing ospf network
add area=area2 network=16.1.1.0/30
add area=area2 network=18.1.1.0/30

/system identity
set name=R6

    </code></pre>

    <p class="note-subtitle">RB7</p>
    <pre class="note-codeblock"><code>
/routing ospf area
add area-id=2.2.2.2 name=area2

/ip address
add address=17.1.1.2/30 interface=ether1 network=17.1.1.0
add address=18.1.1.2/30 interface=ether2 network=18.1.1.0
add address=192.168.1.1/30 interface=ether3 network=192.168.1.0

/routing ospf interface
add interface=ether1
add interface=ether2

/routing ospf network
add area=area2 network=17.1.1.0/30
add area=area2 network=18.1.1.0/30
add area=area2 network=192.168.1.0/30

/system identity
set name=R7

    </code></pre>

    <h3 class="note-subtitle">Ringkasan</h3>
    <p class="note-paragraph">
      MPLS adalah teknologi backbone modern yang digunakan oleh ISP dan perusahaan besar untuk 
      mengoptimalkan forwarding, mendukung VPN, dan memastikan QoS. Fleksibilitasnya dalam 
      mendukung berbagai protokol menjadikannya pilihan utama di jaringan skala besar.
    </p>

    <hr class="note-divider" />
  </main>

  <script>
    document.querySelectorAll('.note-image').forEach(img => {
      img.addEventListener('click', () => img.classList.toggle('expanded'));
    });
  </script>
</body>
</html>
