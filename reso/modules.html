<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PDF Grid Card Preview</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="css/pdf-style.css">

<style>
  /* Overlay Lock */
  #lockScreen {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.85);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2000;
    color: white;
    flex-direction: column;
  }
  #lockScreen input {
    padding: 10px;
    font-size: 16px;
    border: none;
    border-radius: 8px;
    margin-bottom: 10px;
  }
  #lockScreen button {
    padding: 8px 16px;
    border: none;
    border-radius: 8px;
    background: #0d6efd;
    color: white;
    font-weight: bold;
    cursor: pointer;
  }
  #lockScreen button:hover {
    background: #0b5ed7;
  }
</style>
</head>
<body class="pdf-container">

<!-- Lock Screen -->
<div id="lockScreen">
  <h2>Masukkan Password</h2>
  <input type="password" id="passwordInput" placeholder="Password">
  <button onclick="checkPassword()">Login</button>
  <p id="errorMsg" style="color: red; margin-top: 10px; display: none;">Password salah!</p>
</div>

<main class="pdf-main" style="display:none;">
  <h1 class="pdf-title">Daftar PDF</h1>
  <div id="folders-container"></div>
</main>

<!-- Modal Preview PDF -->
<div class="modal fade" id="pdfModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-xl modal-dialog-centered">
    <div class="modal-content modal-pdf">
      <div class="modal-header">
        <h5 class="modal-title" id="pdfModalTitle">Preview PDF</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <iframe id="pdfFrame" src="" frameborder="0"></iframe>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
// ==== SHA256 util ====
async function sha256(message) {
  const msgBuffer = new TextEncoder().encode(message);
  const hashBuffer = await crypto.subtle.digest("SHA-256", msgBuffer);
  const hashArray = Array.from(new Uint8Array(hashBuffer));
  return hashArray.map(b => b.toString(16).padStart(2, "0")).join("");
}

// Password hash untuk "joban123"
const correctHash = "29e4dd44306762b2803f4af4cbb3a53004f26632307acdaafcaa21d53d2a3f51";

async function checkPassword() {
  const input = document.getElementById("passwordInput").value;
  const hash = await sha256(input);
  if (hash === correctHash) {
    document.getElementById("lockScreen").style.display = "none";
    document.querySelector("main").style.display = "block";
  } else {
    document.getElementById("errorMsg").style.display = "block";
  }
}

// ==== Data folder & PDF ====
const data = [
  {
    folderName: "Cisco General Modules",
    files: [
      { name: "CCNA 1 - Introduction to Network", url: "https://drive.google.com/file/d/1yJxm28aCaDk_rgVlMFiCAZAEJXtWGW-U/preview", cover: "img/cisco-module.png" },
      { name: "CCNA 2 - Routing n Switching Essentials", url: "https://drive.google.com/file/d/1cTAdyfxCua6xjdrtz8ZBnxOWrf3IyZaS/preview", cover: "img/cisco-module.png" },
      { name: "CCNA 3 - Switched Network", url: "https://drive.google.com/file/d/1fHqnF4NFY8nlIhSlyM5o9188mX-0rjrg/preview", cover: "img/cisco-module.png" },
      { name: "CCNA 4 - Scaling Network", url: "https://drive.google.com/file/d/1YHzgOSpAJw_TClGzp_hrSxYgFKuAFWtL/preview", cover: "img/cisco-module.png" }
    ]
  },
  {
    folderName: "Cisco Nixtrain",
    files: [
      { name: "001. Basic Router Configuration", url: "https://drive.google.com/file/d/1y6LfCZHtfDR_0FbW0dZg_I1v8DOojNjC/preview", cover: "img/cisco-module.png" },
      { name: "002. Remote Access Telnet Router", url: "https://drive.google.com/file/d/1dGaKrAconZwlZx8LBkJEHSadgYIlKrTE/preview", cover: "img/cisco-module.png" },
      { name: "003. Managing Router Configuration", url: "https://drive.google.com/file/d/1X6fqE1c-e0vUFB6YcbghHYjiC7bBmL-t//preview", cover: "img/cisco-module.png" },
      { name: "004. Static Routing", url: "https://drive.google.com/file/d/103U3uS7CmMgfrM1FjX5UvBUAWeSoez7x/preview", cover: "img/cisco-module.png" },
      { name: "005. Static Default Route", url: "https://drive.google.com/file/d/162D79Tv7l4O2F3YVPBMa0KeT4dkCZDMo/preview", cover: "img/cisco-module.png" },
      { name: "006. RIPv2", url: "https://drive.google.com/file/d/1cFQR8_T5uU4i20n2GxAXEYzlNiMMu45v/preview", cover: "img/cisco-module.png" },
      { name: "007. EIGRP", url: "https://drive.google.com/file/d/1dEsNwE26_TbFb6nM6H4_SPy3UDo_nZRL/preview", cover: "img/cisco-module.png" },
      { name: "008. OSPF", url: "https://drive.google.com/file/d/1xP5kav8Zyqoid7MYCWLzChreltJiowxL/preview", cover: "img/cisco-module.png" }
    ]
  },
];

const container = document.getElementById('folders-container');
const pdfModal = new bootstrap.Modal(document.getElementById('pdfModal'));
const pdfFrame = document.getElementById('pdfFrame');
const pdfModalTitle = document.getElementById('pdfModalTitle');

data.forEach(folder => {
  folder.files.sort((a,b)=> a.name.localeCompare(b.name));

  const folderCard = document.createElement('div');
  folderCard.className = 'pdf-card-folder';

  const header = document.createElement('div');
  header.className = 'pdf-card-header';
  header.innerHTML = `<span>${folder.folderName}</span><span class="toggle-btn">&#9660;</span>`;

  const content = document.createElement('div');
  content.className = 'pdf-card-content pdf-grid';

  folder.files.forEach(file => {
    const pdfCard = document.createElement('div');
    pdfCard.className = 'pdf-card-item';
    pdfCard.innerHTML = `<img src="${file.cover}" alt="${file.name}"><span>${file.name}</span>`;
    pdfCard.addEventListener('click', () => {
      pdfModalTitle.textContent = file.name;
      pdfFrame.src = file.url;
      pdfModal.show();
    });
    content.appendChild(pdfCard);
  });

  header.addEventListener('click', () => {
    folderCard.classList.toggle('expanded');
    if(folderCard.classList.contains('expanded')){
        content.style.maxHeight = content.scrollHeight + "px";
    } else {
        content.style.maxHeight = "0px";
    }
  });

  folderCard.appendChild(header);
  folderCard.appendChild(content);
  container.appendChild(folderCard);
});
</script>
</body>
</html>
