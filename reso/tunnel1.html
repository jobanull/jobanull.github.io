<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Tunnel Networking</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body class="note-container">

  <main class="note-main">
    <h2 class="note-title">Tunnel Networking (PPTP, L2TP, SSTP, GRE, EOIP, IPIP, VXLAN)</h2>
    <p class="note-paragraph">
      Tunnel adalah mekanisme untuk mengenkapsulasi paket data dalam protokol lain agar dapat dikirim melalui jalur yang berbeda atau melewati jaringan publik. 
      Fungsinya antara lain: membuat VPN, menghubungkan site-to-site, atau mengangkut protokol yang tidak didukung secara langsung.
    </p>

    <!-- PPTP -->
    <h3 class="note-subtitle">1. PPTP (Point-to-Point Tunneling Protocol)</h3>
    <p class="note-paragraph">
      Protokol VPN layer 2 yang menggunakan GRE + MPPE encryption. Mudah dikonfigurasi namun tidak lagi aman untuk produksi.
    </p>
    <pre class="note-codeblock"><code>
# Server PPTP
/interface pptp-server server
set enabled=yes default-profile=default

/ppp secret
add name=user1 password=123 service=pptp profile=default remote-address=10.0.0.2 local-address=10.0.0.1
    </code></pre>

    <!-- L2TP -->
    <h3 class="note-subtitle">2. L2TP (Layer 2 Tunneling Protocol)</h3>
    <p class="note-paragraph">
      VPN layer 2 yang sering dipadukan dengan IPsec untuk keamanan. Mendukung multi-protocol transport.
    </p>
    <pre class="note-codeblock"><code>
# Server L2TP + IPsec
/interface l2tp-server server
set enabled=yes use-ipsec=yes ipsec-secret=rahasia default-profile=default
    </code></pre>

    <!-- SSTP -->
    <h3 class="note-subtitle">3. SSTP (Secure Socket Tunneling Protocol)</h3>
    <p class="note-paragraph">
      Berjalan di atas HTTPS (TCP 443) sehingga mudah melewati firewall. Aman karena menggunakan SSL/TLS.
    </p>
    <pre class="note-codeblock"><code>
# Server SSTP
/interface sstp-server server
set enabled=yes certificate=server-cert verify-client-certificate=no
    </code></pre>

    <!-- GRE -->
    <h3 class="note-subtitle">4. GRE (Generic Routing Encapsulation)</h3>
    <p class="note-paragraph">
      Tunnel layer 3 yang ringan, cocok untuk mengangkut berbagai protokol di atas IP.
    </p>
    <pre class="note-codeblock"><code>
# GRE Tunnel
/interface gre add name=gre1 remote-address=198.51.100.2 local-address=198.51.100.1
/ip address add address=10.10.10.1/30 interface=gre1
    </code></pre>

    <!-- EOIP -->
    <h3 class="note-subtitle">5. EOIP (Ethernet over IP)</h3>
    <p class="note-paragraph">
      Protokol MikroTik untuk mengenkapsulasi frame Ethernet, memungkinkan bridging antar-site.
    </p>
    <pre class="note-codeblock"><code>
/interface eoip add name=eoip1 remote-address=203.0.113.2 tunnel-id=100
/ip address add address=10.20.20.1/30 interface=eoip1
    </code></pre>

    <!-- IPIP -->
    <h3 class="note-subtitle">6. IPIP (IP over IP)</h3>
    <p class="note-paragraph">
      Tunnel layer 3 sederhana hanya untuk IP traffic. Overhead rendah, tanpa enkripsi.
    </p>
    <pre class="note-codeblock"><code>
/interface ipip add name=ipip1 remote-address=192.0.2.2 local-address=192.0.2.1
/ip address add address=172.16.1.1/30 interface=ipip1
    </code></pre>

    <!-- VXLAN -->
    <h3 class="note-subtitle">7. VXLAN (Virtual eXtensible LAN)</h3>
    <p class="note-paragraph">
      Tunnel untuk mengenkapsulasi frame Ethernet dalam UDP, mendukung jaringan layer 2 di atas jaringan layer 3, skala besar (ID hingga 16 juta).
    </p>
    <pre class="note-codeblock"><code>
/interface vxlan add name=vxlan1 vni=100 remote-address=203.0.113.2 local-address=203.0.113.1
/ip address add address=192.168.50.1/24 interface=vxlan1
    </code></pre>

    <!-- Perbandingan -->
    <h3 class="note-subtitle">Perbandingan Singkat</h3>
    <table class="note-table">
      <tr>
        <th>Tunnel</th><th>Layer</th><th>Enkripsi</th><th>Kegunaan</th>
      </tr>
      <tr><td>PPTP</td><td>L2</td><td>MPPE</td><td>VPN sederhana (tidak direkomendasikan)</td></tr>
      <tr><td>L2TP/IPsec</td><td>L2</td><td>IPsec</td><td>VPN aman, multi-platform</td></tr>
      <tr><td>SSTP</td><td>L3</td><td>SSL/TLS</td><td>VPN via TCP 443, lewati firewall</td></tr>
      <tr><td>GRE</td><td>L3</td><td>-</td><td>Encapsulation multi-protocol ringan</td></tr>
      <tr><td>EOIP</td><td>L2</td><td>-</td><td>Bridge antar-site MikroTik</td></tr>
      <tr><td>IPIP</td><td>L3</td><td>-</td><td>Tunnel IP sederhana</td></tr>
      <tr><td>VXLAN</td><td>L2 over L3</td><td>-</td><td>Data center overlay network</td></tr>
    </table>

    <h3 class="note-subtitle">CONTOH KASUS</h3>
    <ul class="note-list">
        <li>EOIP</li>
    </ul>


    <img src="img/tunnel1.png" alt="Diagram jaringan" class="note-image" />
    
    <h3 class="note-subtitle">EOIP-RB1</h3>
    <pre class="note-codeblock"><code>
/interface eoip
add name=EOIP1 remote-address=192.168.190.101 \
    tunnel-id=10
/interface wireless security-profiles
set [ find default=yes ] supplicant-identity=MikroTik
/ip address
add address=192.168.190.100/24 interface=ether1 network=192.168.190.0
add address=192.168.1.1/30 interface=ether2 network=192.168.1.0
add address=10.10.10.1/30 interface=EOIP1 network=10.10.10.0
/ip dns
set servers=8.8.8.8,8.8.4.4
/ip firewall nat
add action=masquerade chain=srcnat out-interface=ether1
/ip route
add distance=1 gateway=192.168.190.1
add distance=1 dst-address=192.168.2.0/30 gateway=10.10.10.2
    </code></pre>

    <h3 class="note-subtitle">EOIP-RB2</h3>
    <pre class="note-codeblock"><code>
/interface eoip
add name=EOIP1 remote-address=192.168.190.100 \
    tunnel-id=10
/interface wireless security-profiles
set [ find default=yes ] supplicant-identity=MikroTik
/ip address
add address=192.168.190.101/24 interface=ether1 network=192.168.190.0
add address=192.168.2.1/30 interface=ether2 network=192.168.2.0
add address=10.10.10.2/30 interface=EOIP1 network=10.10.10.0
/ip dns
set servers=8.8.8.8,8.8.4.4
/ip firewall nat
add action=masquerade chain=srcnat out-interface=ether1
/ip route
add distance=1 gateway=192.168.190.1
add distance=1 dst-address=192.168.1.0/30 gateway=10.10.10.1
    </code></pre>

    <h3 class="note-subtitle">CONTOH KASUS</h3>
    <ul class="note-list">
        <li>IPIP</li>
    </ul>


    <img src="img/tunnel1.png" alt="Diagram jaringan" class="note-image" />
    
    <h3 class="note-subtitle">IPIP-RB1</h3>
    <pre class="note-codeblock"><code>
/interface ipip
add local-address=192.168.190.102 name=ipip-tunnel1 remote-address=\
    192.168.190.103
/interface wireless security-profiles
set [ find default=yes ] supplicant-identity=MikroTik
/ip address
add address=192.168.190.102/24 interface=ether1 network=192.168.190.0
add address=192.168.1.1/30 interface=ether2 network=192.168.1.0
add address=10.10.10.1/30 interface=ipip-tunnel1 network=10.10.10.0
/ip dns
set servers=8.8.8.8,8.8.4.4
/ip firewall nat
add action=masquerade chain=srcnat out-interface=ether1
/ip route
add distance=1 gateway=192.168.190.1
add distance=1 dst-address=192.168.2.0/30 gateway=10.10.10.2
    </code></pre>

    <h3 class="note-subtitle">IPIP-RB2</h3>
    <pre class="note-codeblock"><code>
/interface ipip
add local-address=192.168.190.103 name=ipip-tunnel1 remote-address=\
    192.168.190.102
/interface wireless security-profiles
set [ find default=yes ] supplicant-identity=MikroTik
/ip address
add address=192.168.190.103/24 interface=ether1 network=192.168.190.0
add address=192.168.2.1/30 interface=ether2 network=192.168.2.0
add address=10.10.10.2/30 interface=ipip-tunnel1 network=10.10.10.0
/ip dns
set servers=8.8.8.8,8.8.4.4
/ip firewall nat
add action=masquerade chain=srcnat out-interface=ether1
/ip route
add distance=1 gateway=192.168.190.1
add distance=1 dst-address=192.168.1.0/30 gateway=10.10.10.1
    </code></pre>

    <h3 class="note-subtitle">CONTOH KASUS</h3>
    <img src="img/tunnel1.png" alt="Diagram jaringan" class="note-image" />
    
    <h3 class="note-subtitle">GRE-RB1</h3>
    <pre class="note-codeblock"><code>
/interface gre
add local-address=192.168.190.104 name=gre-tunnel1 remote-address=\
    192.168.190.105
/ip address
add address=192.168.190.104/24 interface=ether1 network=192.168.190.0
add address=192.168.1.1/30 interface=ether2 network=192.168.1.0
add address=10.10.10.1/30 interface=gre-tunnel1 network=10.10.10.0
/ip dns
set servers=8.8.8.8,8.8.4.4
/ip firewall nat
add action=masquerade chain=srcnat out-interface=ether1
/ip route
add distance=1 gateway=192.168.190.1
add distance=1 dst-address=192.168.2.0/30 gateway=10.10.10.2
    </code></pre>

    <h3 class="note-subtitle">GRE-RB2</h3>
    <pre class="note-codeblock"><code>
/interface gre
add local-address=192.168.190.105 name=gre-tunnel1 remote-address=\
    192.168.190.104
/ip address
add address=192.168.190.105/24 interface=ether1 network=192.168.190.0
add address=192.168.2.1/30 interface=ether2 network=192.168.2.0
add address=10.10.10.2/30 interface=gre-tunnel1 network=10.10.10.0
/ip dns
set servers=8.8.8.8,8.8.4.4
/ip firewall nat
add action=masquerade chain=srcnat out-interface=ether1
/ip route
add distance=1 gateway=192.168.190.1
add distance=1 dst-address=192.168.1.0/30 gateway=10.10.10.1
    </code></pre>


    <h3 class="note-subtitle">CONTOH KASUS</h3>
    <img src="img/tunnel1.png" alt="Diagram jaringan" class="note-image" />
    
    <h3 class="note-subtitle">VXLAN-RB1</h3>
   <pre class="note-codeblock"><code>
/interface bridge
add name=BRIDGE_VXlAN10
/interface vxlan
add name=vxlan10 vni=10
/ip pool
add name=dhcp_pool0 ranges=192.168.1.2-192.168.1.254
/ip dhcp-server
add address-pool=dhcp_pool0 interface=BRIDGE_VXlAN10 name=dhcp1
/port
set 0 name=serial0
/interface bridge port
add bridge=BRIDGE_VXlAN10 interface=vxlan10
add bridge=BRIDGE_VXlAN10 interface=ether2
/interface vxlan vteps
add interface=vxlan10 remote-ip=192.168.190.107
add interface=vxlan10 remote-ip=192.168.190.108
/ip address
add address=192.168.190.106/24 interface=ether1 network=192.168.190.0
add address=192.168.1.1/24 interface=BRIDGE_VXlAN10 network=192.168.1.0
/ip dhcp-server network
add address=192.168.1.0/24 gateway=192.168.1.1
/ip dns
set servers=8.8.8.8,8.8.4.4
/ip firewall nat
add action=masquerade chain=srcnat out-interface=ether1
/ip route
add distance=1 gateway=192.168.190.1
    </code></pre>

    <h3 class="note-subtitle">VXLAN-RB2</h3>
    <pre class="note-codeblock"><code>
/interface bridge
add name=BRIDGE_VXLAN10
/interface vxlan
add  name=vxlan10 vni=10
/interface bridge port
add bridge=BRIDGE_VXLAN10 interface=vxlan10
add bridge=BRIDGE_VXLAN10 interface=ether2
/interface vxlan vteps
add interface=vxlan10 remote-ip=192.168.190.106
/ip address
add address=192.168.190.107/24 interface=ether1 network=192.168.190.0
/ip dns
set servers=8.8.8.8,8.8.4.4
/ip firewall nat
add action=masquerade chain=srcnat out-interface=ether1
/ip route
add distance=1 gateway=192.168.190.1
    </code></pre>

    <h3 class="note-subtitle">VXLAN-RB3</h3>
    <pre class="note-codeblock"><code>
/interface bridge
add name=BRIDGE_VXLAN10
/interface vxlan
add  name=vxlan10 vni=10
/interface bridge port
add bridge=BRIDGE_VXLAN10 interface=vxlan10
add bridge=BRIDGE_VXLAN10 interface=ether2
/interface vxlan vteps
add interface=vxlan10 remote-ip=192.168.190.106
/ip address
add address=192.168.190.108/24 interface=ether1 network=192.168.190.0
/ip dns
set servers=8.8.8.8,8.8.4.4
/ip firewall nat
add action=masquerade chain=srcnat out-interface=ether1
/ip route
add dst-address=0.0.0.0/0 gateway=192.168.190.1
    </code></pre>



    <!-- Tips -->
    <h3 class="note-subtitle">Tips</h3>
    <ul class="note-list">
      <li>Pakai IPsec jika butuh keamanan pada GRE, L2TP, atau EOIP.</li>
      <li>EOIP hanya optimal antar-MikroTik, tidak kompatibel vendor lain.</li>
      <li>VXLAN cocok untuk virtualisasi dan cloud environment.</li>
      <li>PPTP sebaiknya hanya untuk lab/testing.</li>
    </ul>

    <hr class="note-divider" />
  </main>

</body>
</html>
